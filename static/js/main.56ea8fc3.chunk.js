(this["webpackJsonpalmex-contractor"]=this["webpackJsonpalmex-contractor"]||[]).push([[0],{105:function(e,t,n){e.exports={wrapper:"logo_wrapper__3vcav",text:"logo_text__1Cx8t"}},141:function(e,t,n){e.exports={loader:"loader_loader__2sbTU"}},143:function(e,t,n){e.exports={wrapper:"start-app-fail_wrapper__39QCk"}},149:function(e,t){},155:function(e,t,n){e.exports=n(243)},160:function(e,t,n){},170:function(e,t){},243:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"setThrift",(function(){return ce})),n.d(a,"MrkClientServiceClient",(function(){return re}));var r=n(0),c=n.n(r),o=n(3),l=n.n(o),s=(n(160),n(23)),i=n(24),u=n(248),p=n(249),m=n(77),f=n(68),d=n(69),g=n(75),v=n(70),h=n(76),b=n(57),w=n(16),j=n.n(w),_=n(50),x=n(25),E=n(2),y=n.n(E),O=n(247),k=n(251),I=n(245),T=n(30),C=n.n(T),S="/almex-contractor",N=n(27),A=function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(g.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).setlang=function(e){var t,a;return j.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(n.props.locale!==e.value){r.next=3;break}return r.abrupt("return",null);case 3:return r.prev=3,r.next=6,j.a.awrap(fetch("".concat(S,"/translates/").concat(e.value,".json")));case 6:return t=r.sent,r.next=9,j.a.awrap(t.json());case 9:a=r.sent,n.props.loadTranslations(Object(_.a)({},e.value,a)),n.props.setLocale(e.value),localStorage.setItem("lang",e.value),C.a.locale(e.value),r.next=19;break;case 16:r.prev=16,r.t0=r.catch(3),O.a.error({key:"locale_not_found",message:N.I18n.t("common.error"),description:N.I18n.t("SignIn.locale_not_found")});case 19:case"end":return r.stop()}}),null,null,[[3,16]])},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.locale,a=t.language;return c.a.createElement(k.a,null,c.a.createElement(I.a.Text,{onClick:function(){return e.setlang(a)},className:y()(b.item,a.value===n?b.active:null)},a.value))}}]),t}(r.Component),L=Object(s.connect)((function(e){return{locale:e.i18n.locale}}),(function(e){return Object(x.bindActionCreators)({loadTranslations:N.loadTranslations,setLocale:N.setLocale},e)}))(A),R=function(e){function t(){return Object(f.a)(this,t),Object(g.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.list,t=void 0===e?[]:e;return c.a.createElement(p.a,{className:b.list,type:"flex",justify:"center",align:"middle",gutter:16},t.map((function(e){return c.a.createElement(L,{key:e.value,language:e})})))}}]),t}(r.PureComponent),P=Object(s.connect)((function(e){return{list:e.i18n.list}}))(R),M="".concat("/almex-contractor","/assets/img/Logo.svg"),W=n(105),B=function(){return c.a.createElement("div",{className:W.wrapper},c.a.createElement("img",{src:M,alt:"logo"}),c.a.createElement("span",{className:W.text},"contractor"))},F=u.a.Content,G=function(){return c.a.createElement(u.a,{className:m.container},c.a.createElement(F,{className:m.wrapper},c.a.createElement(p.a,{className:m.content},c.a.createElement(B,null),c.a.createElement(P,null))))},J=n(141),D=n(244),H=function(){return c.a.createElement("div",{className:J.loader},c.a.createElement(D.a,null))},U=n(250),z=n(246),Q=n(143),X=function(){return c.a.createElement(p.a,{type:"flex",justify:"center",align:"middle",className:Q.wrapper},c.a.createElement(U.a,{message:"Error: failed to connect, server not responding",description:c.a.createElement(p.a,{type:"flex",justify:"center"},c.a.createElement(z.a,{type:"danger",onClick:function(){return window.location.reload()}},"Try again")),type:"error"}))},$=Object(s.connect)((function(e){return{loading:e.asyncInitialState.loading,error:e.asyncInitialState.error}}))((function(e){var t=e.loading;return null!==e.error?c.a.createElement(X,null):c.a.createElement(c.a.Fragment,null,t?c.a.createElement(H,null):c.a.createElement(i.d,null,c.a.createElement(i.b,{exact:!0,path:"/signIn",component:G}),c.a.createElement(i.a,{to:"/signIn"})))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var q=n(55),K=n(129),V=n(144),Y=n(59),Z=n(74),ee={token:localStorage.getItem("token")||null,user:null,isFetching:!1},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;return t.type,e},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type,e},ae=n(52),re=null,ce=function(e){var t;return j.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:t=e.THRIFT,re=new window.MrkClientServiceClient(new window.Thrift.Protocol(new window.Thrift.Transport("".concat(t.URL,"/").concat(t.API,"/thrift/mrk-client-json"))));case 2:case"end":return n.stop()}}))},oe=n(147),le=function(e){return new Promise((function(t,n){var a,r,c,o,l,s,i,u,p;return j.a.async((function(m){for(;;)switch(m.prev=m.next){case 0:return a=e(),r=Object(ae.a)({},a.auth),m.prev=2,m.next=5,j.a.awrap(fetch("".concat(S,"/web-config.json")));case 5:return c=m.sent,m.next=8,j.a.awrap(c.json());case 8:return o=m.sent,m.next=11,j.a.awrap(ce(o));case 11:if(null===r.token){m.next=24;break}return m.prev=12,m.next=15,j.a.awrap(re.isAuthSessionExpired(r.token));case 15:m.sent&&(r=Object(ae.a)({},r,{token:null})),m.next=24;break;case 19:m.prev=19,m.t0=m.catch(12),m.t0,r=Object(ae.a)({},r,{token:null}),localStorage.removeItem("token");case 24:return l=localStorage.getItem("lang")||o.LANG,m.next=27,j.a.awrap(fetch("".concat(S,"/translates/").concat(l,".json")));case 27:return s=m.sent,m.t1=_.a,m.t2={},m.t3=l,m.next=33,j.a.awrap(s.json());case 33:return m.t4=m.sent,i=(0,m.t1)(m.t2,m.t3,m.t4),C.a.locale(l),m.next=38,j.a.awrap(re.getAllLanguages());case 38:return u=m.sent,m.next=41,j.a.awrap(re.getInfo());case 41:p=m.sent,t(Object(ae.a)({},a,{auth:r,settings:Object(ae.a)({},p,{},o),i18n:{locale:l,translations:i,list:Object(oe.reduce)(u,(function(e,t,n){return e.push({name:t,value:n}),e}),[])}})),m.next=49;break;case 45:m.prev=45,m.t5=m.catch(2),m.t5,n(m.t5);case 49:case"end":return m.stop()}}),null,null,[[2,45],[12,19]])}))},se=n(148),ie=n(20),ue=Object(ie.a)(),pe=function(){var e,t=[V.a.withExtraArgument(a),Object(K.a)(ue),Y.middleware(le)],n=[Object(se.composeWithDevTools)(x.applyMiddleware.apply(void 0,t))];return Object(x.createStore)((e=ue,Y.outerReducer(Object(x.combineReducers)({router:Object(q.b)(e),asyncInitialState:Y.innerReducer,i18n:N.i18nReducer,modals:Z.reducer,auth:te,settings:ne}))),x.compose.apply(void 0,n))}();Object(N.syncTranslationWithStore)(pe);var me,fe=pe,de=n(149),ge=n(101),ve=Object(Z.ModalRoot)(fe);me=$,l.a.render(c.a.createElement(s.Provider,{store:fe},c.a.createElement(q.a,{history:ue},c.a.createElement(ge.a,{basename:S},c.a.createElement(me,null)),c.a.createElement(ve,{modalComponents:de}))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},57:function(e,t,n){e.exports={list:"languages_list__1NJHh",item:"languages_item__g1mgX",active:"languages_active__3h82-"}},77:function(e,t,n){e.exports={wrapper:"signin_wrapper__31duv",content:"signin_content__2p7Gu",container:"signin_container__jIzED",button:"signin_button__bG6AB",form:"signin_form__3OtOE"}}},[[155,1,2]]]);
//# sourceMappingURL=main.56ea8fc3.chunk.js.map