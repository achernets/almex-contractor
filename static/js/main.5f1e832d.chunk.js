(this["webpackJsonpalmex-contractor"]=this["webpackJsonpalmex-contractor"]||[]).push([[0],{102:function(e,t,n){e.exports={wrapper:"logo_wrapper__3vcav",text:"logo_text__1Cx8t"}},139:function(e,t,n){e.exports={loader:"loader_loader__2sbTU"}},141:function(e,t,n){e.exports={wrapper:"start-app-fail_wrapper__39QCk"}},147:function(e,t){},153:function(e,t,n){e.exports=n(241)},158:function(e,t,n){},168:function(e,t){},241:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"setThrift",(function(){return re})),n.d(a,"MrkClientServiceClient",(function(){return ae}));var r=n(0),c=n.n(r),o=n(3),l=n.n(o),i=(n(158),n(20)),s=n(73),u=n(245),p=n(248),m=n(76),f=n(66),d=n(67),g=n(74),v=n(68),h=n(75),w=n(55),b=n(16),x=n.n(b),j=n(48),_=n(21),E=n(2),y=n.n(E),O=n(246),k=n(250),I=n(244),T=n(28),C=n.n(T),S=n(24),N=function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(g.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).setlang=function(e){var t,a;return x.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(n.props.locale!==e.value){r.next=3;break}return r.abrupt("return",null);case 3:return r.prev=3,r.next=6,x.a.awrap(fetch("".concat("/almex-contractor","/translates/").concat(e.value,".json")));case 6:return t=r.sent,r.next=9,x.a.awrap(t.json());case 9:a=r.sent,n.props.loadTranslations(Object(j.a)({},e.value,a)),n.props.setLocale(e.value),localStorage.setItem("lang",e.value),C.a.locale(e.value),r.next=19;break;case 16:r.prev=16,r.t0=r.catch(3),O.a.error({key:"locale_not_found",message:S.I18n.t("common.error"),description:S.I18n.t("SignIn.locale_not_found")});case 19:case"end":return r.stop()}}),null,null,[[3,16]])},n}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.locale,a=t.language;return c.a.createElement(k.a,null,c.a.createElement(I.a.Text,{onClick:function(){return e.setlang(a)},className:y()(w.item,a.value===n?w.active:null)},a.value))}}]),t}(r.Component),A=Object(i.connect)((function(e){return{locale:e.i18n.locale}}),(function(e){return Object(_.bindActionCreators)({loadTranslations:S.loadTranslations,setLocale:S.setLocale},e)}))(N),L=function(e){function t(){return Object(f.a)(this,t),Object(g.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.list,t=void 0===e?[]:e;return c.a.createElement(p.a,{className:w.list,type:"flex",justify:"center",align:"middle",gutter:16},t.map((function(e){return c.a.createElement(A,{key:e.value,language:e})})))}}]),t}(r.PureComponent),R=Object(i.connect)((function(e){return{list:e.i18n.list}}))(L),P="".concat("/almex-contractor","/assets/img/Logo.svg"),M=n(102),W=function(){return c.a.createElement("div",{className:M.wrapper},c.a.createElement("img",{src:P,alt:"logo"}),c.a.createElement("span",{className:M.text},"contractor"))},B=u.a.Content,F=function(){return c.a.createElement(u.a,{className:m.container},c.a.createElement(B,{className:m.wrapper},c.a.createElement(p.a,{className:m.content},c.a.createElement(W,null),c.a.createElement(R,null))))},G=n(139),J=n(243),D=function(){return c.a.createElement("div",{className:G.loader},c.a.createElement(J.a,null))},H=n(249),U=n(247),z=n(141),Q=function(){return c.a.createElement(p.a,{type:"flex",justify:"center",align:"middle",className:z.wrapper},c.a.createElement(H.a,{message:"Error: failed to connect, server not responding",description:c.a.createElement(p.a,{type:"flex",justify:"center"},c.a.createElement(U.a,{type:"danger",onClick:function(){return window.location.reload()}},"Try again")),type:"error"}))},X=Object(i.connect)((function(e){return{loading:e.asyncInitialState.loading,error:e.asyncInitialState.error}}))((function(e){var t=e.loading;return null!==e.error?c.a.createElement(Q,null):c.a.createElement(c.a.Fragment,null,t?c.a.createElement(D,null):c.a.createElement(s.d,null,c.a.createElement(s.b,{exact:!0,path:"/signIn",component:F}),c.a.createElement(s.a,{to:"/signIn"})))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var $=n(53),q=n(127),K=n(142),V=n(57),Y=n(72),Z={token:localStorage.getItem("token")||null,user:null,isFetching:!1},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;return t.type,e},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type,e},ne=n(50),ae=null,re=function(e){var t;return x.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:t=e.THRIFT,ae=new window.MrkClientServiceClient(new window.Thrift.Protocol(new window.Thrift.Transport("".concat(t.URL,"/").concat(t.API,"/thrift/mrk-client-json"))));case 2:case"end":return n.stop()}}))},ce=n(145),oe=function(e){return new Promise((function(t,n){var a,r,c,o,l,i,s,u,p;return x.a.async((function(m){for(;;)switch(m.prev=m.next){case 0:return a=e(),r=Object(ne.a)({},a.auth),m.prev=2,m.next=5,x.a.awrap(fetch("".concat("/almex-contractor","/web-config.json")));case 5:return c=m.sent,m.next=8,x.a.awrap(c.json());case 8:return o=m.sent,m.next=11,x.a.awrap(re(o));case 11:if(null===r.token){m.next=24;break}return m.prev=12,m.next=15,x.a.awrap(ae.isAuthSessionExpired(r.token));case 15:m.sent&&(r=Object(ne.a)({},r,{token:null})),m.next=24;break;case 19:m.prev=19,m.t0=m.catch(12),m.t0,r=Object(ne.a)({},r,{token:null}),localStorage.removeItem("token");case 24:return m.next=26,x.a.awrap(ae.getAllLanguages());case 26:return l=m.sent,m.next=29,x.a.awrap(ae.getInfo());case 29:return i=m.sent,s=localStorage.getItem("lang")||o.LANG,m.next=33,x.a.awrap(fetch("".concat("/almex-contractor","/translates/").concat(s,".json")));case 33:return u=m.sent,m.t1=j.a,m.t2={},m.t3=s,m.next=39,x.a.awrap(u.json());case 39:m.t4=m.sent,p=(0,m.t1)(m.t2,m.t3,m.t4),C.a.locale(s),t(Object(ne.a)({},a,{auth:r,settings:Object(ne.a)({},i,{},o),i18n:{locale:s,translations:p,list:Object(ce.reduce)(l,(function(e,t,n){return e.push({name:t,value:n}),e}),[])}})),m.next=49;break;case 45:m.prev=45,m.t5=m.catch(2),m.t5,n(m.t5);case 49:case"end":return m.stop()}}),null,null,[[2,45],[12,19]])}))},le=n(146),ie=n(26),se=Object(ie.a)(),ue=function(){var e,t=[K.a.withExtraArgument(a),Object(q.a)(se),V.middleware(oe)],n=[Object(le.composeWithDevTools)(_.applyMiddleware.apply(void 0,t))];return Object(_.createStore)((e=se,V.outerReducer(Object(_.combineReducers)({router:Object($.b)(e),asyncInitialState:V.innerReducer,i18n:S.i18nReducer,modals:Y.reducer,auth:ee,settings:te}))),_.compose.apply(void 0,n))}();Object(S.syncTranslationWithStore)(ue);var pe,me=ue,fe=n(147),de=Object(Y.ModalRoot)(me);pe=X,l.a.render(c.a.createElement(i.Provider,{store:me},c.a.createElement($.a,{history:se},c.a.createElement(pe,null),c.a.createElement(de,{modalComponents:fe}))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},55:function(e,t,n){e.exports={list:"languages_list__1NJHh",item:"languages_item__g1mgX",active:"languages_active__3h82-"}},76:function(e,t,n){e.exports={wrapper:"signin_wrapper__31duv",content:"signin_content__2p7Gu",container:"signin_container__jIzED",button:"signin_button__bG6AB",form:"signin_form__3OtOE"}}},[[153,1,2]]]);
//# sourceMappingURL=main.5f1e832d.chunk.js.map