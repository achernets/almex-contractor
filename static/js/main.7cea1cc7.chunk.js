(this["webpackJsonpalmex-contractor"]=this["webpackJsonpalmex-contractor"]||[]).push([[0],{127:function(e,t,n){e.exports={list:"languages_list__1NJHh",item:"languages_item__g1mgX",active:"languages_active__3h82-"}},132:function(e,t,n){e.exports={layuot_app:"layout-app_layuot_app__29owt",layuot_sub:"layout-app_layuot_sub__1JOLh",header:"layout-app_header__1TFv2"}},133:function(e,t,n){e.exports={list:"listDocumentPatterns_list__2Jv5j",wrapper:"listDocumentPatterns_wrapper__2IEp5",title:"listDocumentPatterns_title__2XpVK",item:"listDocumentPatterns_item__2JNQo"}},176:function(e,t,n){e.exports={wrapper:"signin_wrapper__31duv",content:"signin_content__2p7Gu",container:"signin_container__jIzED",button:"signin_button__bG6AB",form:"signin_form__3OtOE"}},178:function(e,t,n){e.exports={avatart:"usermenu_avatart__iT1_V",text:"usermenu_text__2EO_M",line:"usermenu_line__2FECF"}},320:function(e,t,n){e.exports={menu:"menufilters_menu__2V69x"}},321:function(e,t,n){e.exports={empty:"empty_empty__3rAWm"}},322:function(e,t,n){e.exports={table:"table_table__1u5G9"}},326:function(e,t,n){e.exports={loader:"loader_loader__2sbTU"}},330:function(e,t,n){e.exports={wrapper:"start-app-fail_wrapper__39QCk"}},339:function(e,t,n){e.exports=n(624)},344:function(e,t,n){},354:function(e,t){},624:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"setThrift",(function(){return Ne})),n.d(a,"MrkClientServiceClient",(function(){return Ie}));var r={};n.r(r),n.d(r,"MODAL_MRK_DOCUMENT",(function(){return ut})),n.d(r,"MODAL_CREATE_MRK_DOCUMENT",(function(){return mt})),n.d(r,"MODAL_CHANGE_PASSWORD",(function(){return pt}));var c=n(0),o=n.n(c),l=n(5),i=n.n(l),s=(n(344),n(345),n(17)),u=n(52),m=n(628),p=n(626),d=n(625),f=n(176),E=n(156),g=n(157),h=n(174),b=n(158),y=n(175),v=n(127),_=n(14),k=n.n(_),O=n(104),w=n(21),j=n(2),C=n.n(j),x=n(634),D=n(632),S=n(58),M=n.n(S),T=n(24),I=function(){var e;window.showLogs&&(e=console).log.apply(e,arguments)},N="/almex-contractor",A=n(11),R=function(e){function t(){var e,n;Object(E.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).setlang=function(e){var t,a;return k.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(n.props.locale!==e.value){r.next=3;break}return r.abrupt("return",null);case 3:return r.prev=3,r.next=6,k.a.awrap(fetch("".concat(N,"/translates/").concat(e.value,".json")));case 6:return t=r.sent,r.next=9,k.a.awrap(t.json());case 9:a=r.sent,n.props.loadTranslations(Object(O.a)({},e.value,a)),n.props.setLocale(e.value),localStorage.setItem("lang",e.value),M.a.locale(e.value),r.next=19;break;case 16:r.prev=16,r.t0=r.catch(3),x.a.error({key:"locale_not_found",message:A.I18n.t("common.error"),description:A.I18n.t("SignIn.locale_not_found")});case 19:case"end":return r.stop()}}),null,null,[[3,16]])},n}return Object(y.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.locale,a=t.language;return o.a.createElement(d.a,null,o.a.createElement(D.a.Text,{onClick:function(){return e.setlang(a)},className:C()(v.item,a.value===n?v.active:null)},a.value))}}]),t}(c.Component),P=Object(s.connect)((function(e){return{locale:e.i18n.locale}}),(function(e){return Object(w.bindActionCreators)({loadTranslations:A.loadTranslations,setLocale:A.setLocale},e)}))(R),U=function(e){function t(){return Object(E.a)(this,t),Object(h.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.props.list,t=void 0===e?[]:e;return o.a.createElement(p.a,{className:v.list,type:"flex",justify:"center",align:"middle",gutter:16},t.map((function(e){return o.a.createElement(P,{key:e.value,language:e})})))}}]),t}(c.PureComponent),F=Object(s.connect)((function(e){return{list:e.i18n.list}}))(U),L=n(631),G=n(627),K=n(32),z=n(53),H=function(e){return function(t,n,a){var r,c,o,l;return k.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return t({type:"SIGN_IN_REQUEST"}),i.prev=1,r=n(),c=r.i18n.locale,o=r.settings.APP_VERSION,i.next=5,k.a.awrap(a.MrkClientServiceClient.authMrkClient(e.login,e.password,null,c,o));case 5:l=i.sent,localStorage.setItem("token",l.id),t({type:"SIGN_IN_SUCCESS",payload:l}),i.next=15;break;case 10:i.prev=10,i.t0=i.catch(1),i.t0.preconditionExceptionKey&&x.a.error({key:"login",message:i.t0.preconditionExceptionKey,description:i.t0.message}),t({type:"SIGN_IN_FAILURE"}),I(i.t0);case 15:case"end":return i.stop()}}),null,null,[[1,10]])}},q=function(){return function(e,t,n){var a,r;return k.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return e({type:"LOGOUT_REQUEST"}),c.prev=1,a=t(),r=a.auth.token,c.next=5,k.a.awrap(n.MrkClientServiceClient.logout(r));case 5:localStorage.removeItem("token"),e({type:"LOGOUT_SUCCESS"}),c.next=14;break;case 9:c.prev=9,c.t0=c.catch(1),c.t0.preconditionExceptionKey&&x.a.error({key:"logout",message:c.t0.preconditionExceptionKey,description:c.t0.message}),e({type:"LOGOUT_FAILURE"}),I(c.t0);case 14:case"end":return c.stop()}}),null,null,[[1,9]])}},W=n(65),V=Object(s.connect)((function(e){return{token:e.auth.token,isFetching:e.auth.isFetching}}),(function(e){return Object(w.bindActionCreators)({login:H},e)}))((function(e){var t=e.login,n=e.token,a=e.isFetching;return null!==n?o.a.createElement(u.a,{to:{pathname:"/"}}):o.a.createElement(K.b,{initialValues:{login:"",password:""},validationSchema:W.object().shape({login:W.string().required(A.I18n.t("form.required")),password:W.string().required(A.I18n.t("form.required"))}),onSubmit:function(e){t(e)}},(function(){return o.a.createElement(L.a,{style:{width:260}},o.a.createElement(L.a.Item,{name:"login"},o.a.createElement(G.a,{name:"login",placeholder:A.I18n.t("SignIn.login"),size:"large"})),o.a.createElement(L.a.Item,{name:"password",extra:null},o.a.createElement(G.a.Password,{name:"password",placeholder:A.I18n.t("SignIn.password"),size:"large"})),o.a.createElement(p.a,{gutter:[24,24]},o.a.createElement(d.a,null,o.a.createElement(z.a,{type:"primary",block:!0,size:"large",htmlType:"submit",loading:a},A.I18n.t("SignIn.sign_in"))),o.a.createElement(d.a,null,o.a.createElement(z.a,{block:!0,size:"large",htmlType:"button"},A.I18n.t("SignIn.sign_up")))))}))})),Q="".concat("/almex-contractor","/assets/img/Logo.svg"),Y=m.a.Content,J=function(){return o.a.createElement(m.a,{className:f.container},o.a.createElement(Y,{className:f.wrapper},o.a.createElement(p.a,{className:f.content,gutter:[0,16]},o.a.createElement(d.a,null,o.a.createElement("img",{src:Q,alt:"logo"})),o.a.createElement(d.a,null,o.a.createElement(F,null)),o.a.createElement(d.a,null,o.a.createElement(V,null)))))},B=n(237),X=n(172),$=n(69),Z=n(629),ee=n(34),te=n(178),ne=Object(s.connect)((function(e){return{client:e.auth.client}}),(function(e){return Object(w.bindActionCreators)({showModal:ee.actions.showModal,logout:q},e)}))((function(e){var t=e.logout,n=e.client,a=e.showModal,r=o.a.createElement(B.a,null,o.a.createElement(B.a.Item,{key:"0"},o.a.createElement($.b,{to:"/profile"},A.I18n.t("UserMenu.edit"))),o.a.createElement(B.a.Item,{key:"1",onClick:function(){return a("MODAL_CHANGE_PASSWORD")}},A.I18n.t("UserMenu.change_password")),o.a.createElement(B.a.Divider,null),o.a.createElement(B.a.Item,{key:"3",onClick:function(){return t()}},A.I18n.t("UserMenu.logout")));return o.a.createElement(X.a,{overlay:r,trigger:["click"]},o.a.createElement("div",{className:te.line},o.a.createElement(Z.a,{size:24,className:te.avatar},n.firstName[0],n.lastName[0]),o.a.createElement(D.a.Text,{className:te.text},function(e){var t=e.firstName,n=e.lastName;return"".concat(Object(T.isEmpty)(t)?"":Object(T.upperFirst)(t)+""," ").concat(Object(T.isEmpty)(n)?"":Object(T.upperFirst)(n))}(n))))})),ae=n(132),re=m.a.Content,ce=function(e){var t=e.children;return o.a.createElement(m.a,{className:ae.layuot_app},t)},oe=function(e){var t=e.children;return o.a.createElement(m.a,{className:ae.layuot_sub},o.a.createElement(re,null,t))},le=function(e){var t=e.children,n=e.className;return o.a.createElement(m.a.Header,{className:C()(n,ae.header)},t)},ie=function(e){var t=e.children,n=e.className;return o.a.createElement(m.a.Header,{className:C()(n,ae.header)},o.a.createElement(p.a,{type:"flex",justify:"space-between",align:"middle"},o.a.createElement(d.a,{span:12},o.a.createElement($.b,{to:"/mrkDocuments"},o.a.createElement("img",{src:Q,alt:"logo"}))),o.a.createElement(d.a,{span:12},o.a.createElement(p.a,{type:"flex",justify:"end",align:"middle",gutter:[16,0]},o.a.createElement(ne,null)))),t)},se=n(22),ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(t,n,a){var r,c,o,l,i,s,u;return k.a.async((function(m){for(;;)switch(m.prev=m.next){case 0:return t({type:"GET_MRK_DOCUMENT_REQUEST"}),m.prev=1,r=n(),c=r.auth.token,o=r.mrkDocuments,l=o.mrkDocumentType,i=o.searchText,s=new KazFilter({position:20*e-20,countFilter:20,orders:[],items:[new FilterItem({field:"type",value:"MrkDocumentType.".concat(Object(T.keys)(MrkDocumentType)[l]),condition:FilterCondition.EQUAL,fType:FilterFieldType.ENUMERATED})]}),Object(T.isEmpty)(i)||s.items.push(new FilterItem({field:"name",value:i,condition:FilterCondition.CONTAIN,fType:FilterFieldType.STRING})),m.next=7,k.a.awrap(a.MrkClientServiceClient.getMrkDocumentPage(c,s));case 7:u=m.sent,t({type:"GET_MRK_DOCUMENT_SUCCESS",payload:Object(se.a)({},u,{page:e,isSearch:!Object(T.isEmpty)(i)})}),m.next=16;break;case 11:m.prev=11,m.t0=m.catch(1),m.t0.preconditionExceptionKey&&x.a.error({key:"getMrkDocuments",message:m.t0.preconditionExceptionKey,description:m.t0.message}),t({type:"GET_MRK_DOCUMENT_FAILURE"}),I(m.t0);case 16:case"end":return m.stop()}}),null,null,[[1,11]])}},me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(t){return k.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:t({type:"CHANGE_SEARCH_TEXT",payload:e});case 1:case"end":return n.stop()}}))}},pe=function(e){return function(t){return k.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:t({type:"CHANGE_MRK_DOCUMENT_TYPE",payload:e}),t(ue());case 2:case"end":return n.stop()}}))}},de=n(320),fe=function(e){var t=e.data,n=void 0===t?[]:t,a=e.active,r=void 0===a?null:a,c=e.prefix,l=void 0===c?"":c,i=e.onClick,s=void 0===i?function(){}:i;return o.a.createElement(p.a,{className:de.menu,type:"flex",justify:"start",align:"middle",gutter:[24,0]},n.map((function(e){return o.a.createElement(d.a,{key:e},o.a.createElement(D.a.Text,{className:C()({active:r===e}),onClick:function(){return s(e)},strong:!0},Object(T.isEmpty)(l)?A.I18n.t(e):A.I18n.t("".concat(l,".").concat(e))))})))},Ee=n(240),ge=Object(s.connect)((function(e){return{searchText:e.mrkDocuments.searchText,mrkDocumentType:e.mrkDocuments.mrkDocumentType,isFetching:e.mrkDocuments.isFetching}}),(function(e){return Object(w.bindActionCreators)({showModal:ee.actions.showModal,getMrkDocuments:ue,changeMrkDocumentType:pe,changeTextSearch:me},e)}))((function(e){var t=e.showModal,n=e.isFetching,a=e.getMrkDocuments,r=e.changeMrkDocumentType,c=e.mrkDocumentType,l=e.changeTextSearch,i=e.searchText;return o.a.createElement(le,null,o.a.createElement(p.a,{type:"flex",justify:"space-between",align:"middle"},o.a.createElement(d.a,{span:12},o.a.createElement(fe,{prefix:"MrkDocumentType",data:Object(T.keys)(MrkDocumentType),active:Object(T.keys)(MrkDocumentType)[c],onClick:function(e){return r(Object(T.get)(Object(T.reverse)(MrkDocumentType),e,MrkDocumentType.INPUT))}})),o.a.createElement(d.a,{span:12},o.a.createElement(p.a,{type:"flex",justify:"end",align:"middle",gutter:[16,0]},o.a.createElement(d.a,null,o.a.createElement(z.a,{type:"primary",disabled:n,onClick:function(){return t("MODAL_CREATE_MRK_DOCUMENT",{mrkDocument:null})}},A.I18n.t("MrkDocuments.create"))),o.a.createElement(d.a,null,o.a.createElement(Ee.a.Search,{value:i,onChange:function(e){return l(e.target.value)},onSearch:function(){return a()},placeholder:A.I18n.t("MrkDocuments.name"),disabled:n})),o.a.createElement(d.a,null,o.a.createElement(ne,null))))))})),he=n(64),be=n(107),ye=n(630),ve=n(110),_e=n(321),ke=function(e){var t=e.className,n=e.children,a=Object(be.a)(e,["className","children"]);return o.a.createElement(ve.a,Object.assign({className:C()(_e.empty,t)},a),n)},Oe=n(322),we=function(e){var t=e.size,n=void 0===t?"middle":t,a=e.tableLayout,r=void 0===a?"fixed":a,l=e.bordered,i=void 0===l||l,s=e.columns,u=void 0===s?[]:s,m=e.dataSource,p=void 0===m?[]:m,d=e.rowKey,f=void 0===d?"id":d,E=e.locale,g=void 0===E?{}:E,h=Object(be.a)(e,["size","tableLayout","bordered","columns","dataSource","rowKey","locale"]),b=Object(c.useRef)(),y=Object(c.useState)({width:0,height:0}),v=Object(he.a)(y,2),_=v[0],k=v[1];Object(c.useLayoutEffect)((function(){var e=function(){b.current&&k({width:b.current.offsetWidth,height:b.current.offsetHeight})};return e(),window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]);var O=0===_.height?0:_.height-105,w=g.emptyText;return o.a.createElement("div",{ref:b,className:Oe.table},o.a.createElement(ye.a,Object.assign({tableLayout:r,bordered:i,size:n,locale:{emptyText:Object(T.isEmpty)(w)?o.a.createElement(ke,{style:{height:O+25}}):o.a.createElement("div",{style:{height:O+25}},w)},pagination:{simple:!0,defaultPageSize:20},scroll:{y:O},columns:u,rowKey:f,hasData:0===p.length,dataSource:p},h)))},je=Object(s.connect)((function(e){return{mrkDocuments:e.mrkDocuments.mrkDocuments,count:e.mrkDocuments.count,page:e.mrkDocuments.page,isSearch:e.mrkDocuments.isSearch,isFetching:e.mrkDocuments.isFetching}}),(function(e){return Object(w.bindActionCreators)({getMrkDocuments:ue,showModal:ee.actions.showModal},e)}))((function(e){var t=e.getMrkDocuments,n=e.showModal,a=e.mrkDocuments,r=e.isSearch,l=e.count,i=e.page,s=e.isFetching;return Object(c.useEffect)((function(){t()}),[]),o.a.createElement(we,{loading:s,columns:[{title:A.I18n.t("MrkDocuments.patternName"),dataIndex:"patternName"},{title:A.I18n.t("MrkDocuments.name"),dataIndex:"name"},{title:A.I18n.t("MrkDocuments.createDate"),key:"createDate",render:function(e){return M()(e).format("DD.MM.YYYY")}}],dataSource:a,pagination:{simple:!0,defaultPageSize:20,total:l,current:i,onChange:function(e){return t(e)}},onRow:function(e){return{onClick:function(){return n("MODAL_MRK_DOCUMENT",{mrkDocument:e})}}},locale:{emptyText:r?o.a.createElement(ke,{description:A.I18n.t("MrkDocuments.no_data_search")}):o.a.createElement(ke,{imageStyle:{height:0},image:null,description:o.a.createElement(D.a.Text,null,A.I18n.t("MrkDocuments.no_data"))},o.a.createElement(z.a,{type:"primary",onClick:function(){return n("MODAL_CREATE_MRK_DOCUMENT",{mrkDocument:null})}},A.I18n.t("MrkDocuments.create_empty")))}})})),Ce=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(ge,null),o.a.createElement(oe,null,o.a.createElement(je,null)))},xe=n(134),De=n(326),Se=n(323),Me=function(){return o.a.createElement("div",{className:De.loader},o.a.createElement(Se.a,null))},Te=n(9),Ie=null,Ne=function(e){var t;return k.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:t=e.THRIFT,Ie=new window.MrkClientServiceClient(new window.Thrift.Protocol(new window.Thrift.Transport("".concat(t.URL,"/").concat(t.API,"/thrift/mrk-client-json"))));case 2:case"end":return n.stop()}}))},Ae=n(236),Re=n(133),Pe=Object(s.connect)((function(e){return{token:e.auth.token}}),(function(e){return Object(w.bindActionCreators)({},e)}))((function(e){var t=e.token,n=e.documentPattern,a=e.setDocumentPattern,r=Object(c.useState)([]),l=Object(he.a)(r,2),i=l[0],s=l[1],u=Object(c.useState)(!1),m=Object(he.a)(u,2),p=m[0],d=m[1];Object(c.useEffect)((function(){var e=!1;return function n(a){var r,c;return k.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return e||d(!0),o.prev=1,r=new KazFilter({position:a.length,countFilter:50,orders:[],items:[]}),o.next=5,k.a.awrap(Ie.getAllDocumentPatterns(t,r));case 5:50===(c=o.sent).length?n([].concat(Object(xe.a)(a),Object(xe.a)(c))):e||(d(!1),s([].concat(Object(xe.a)(a),Object(xe.a)(c)))),o.next=13;break;case 9:o.prev=9,o.t0=o.catch(1),e||d(!1),I(o.t0);case 13:case"end":return o.stop()}}),null,null,[[1,9]])}([]),function(){e=!0}}),[]);var f=function(e){var t=e.key,r=e.index,c=e.style,l=i[r];return o.a.createElement("div",{key:t,className:Re.item,style:c},o.a.createElement(D.a.Text,{ellipsis:!0,onClick:function(){return a(l)}},l.nameDocPattern),Object(T.get)(n,"id",null)===l.id&&o.a.createElement(Te.a,{type:"check"}))};return o.a.createElement("div",{className:Re.wrapper},o.a.createElement(D.a.Text,{className:Re.title,strong:!0},A.I18n.t("CreateMrkDocument.allowedDocumentPatterns"),":"),o.a.createElement(Ae.a,{className:Re.list},(function(e){var t=e.height,n=e.width;return o.a.createElement(Ae.b,{width:n,height:t-24,rowCount:i.length,rowHeight:36,rowRenderer:f})})),p&&o.a.createElement(Me,null))})),Ue=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(ie,null),o.a.createElement(oe,null,o.a.createElement(Pe,null)))},Fe=Object(s.connect)((function(e){return{token:e.auth.token}}))((function(e){var t=e.component,n=e.token,a=Object(be.a)(e,["component","token"]);return o.a.createElement(u.b,Object.assign({},a,{render:function(e){return null!==n?o.a.createElement(t,e):o.a.createElement(u.a,{to:{pathname:"/signIn"}})}}))})),Le=n(635),Ge=n(330),Ke=function(){return o.a.createElement(p.a,{type:"flex",justify:"center",align:"middle",className:Ge.wrapper},o.a.createElement(Le.a,{message:"Error: failed to connect, server not responding",description:o.a.createElement(p.a,{type:"flex",justify:"center"},o.a.createElement(z.a,{type:"danger",onClick:function(){return window.location.reload()}},"Try again")),type:"error"}))},ze=Object(s.connect)((function(e){return{loading:e.asyncInitialState.loading,error:e.asyncInitialState.error}}))((function(e){var t=e.loading;return null!==e.error?o.a.createElement(Ke,null):o.a.createElement(o.a.Fragment,null,t?o.a.createElement(Me,null):o.a.createElement(u.d,null,o.a.createElement(u.b,{exact:!0,path:"/signIn",component:J}),o.a.createElement(ce,null,o.a.createElement(u.d,null,o.a.createElement(Fe,{exact:!0,path:"/mrkDocuments",component:Ce}),o.a.createElement(Fe,{exact:!0,path:"/profile",component:Ue}),o.a.createElement(u.a,{to:"/mrkDocuments"}))),o.a.createElement(u.a,{to:"/"})))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var He=n(126),qe=n(307),We=n(331),Ve=n(130),Qe=Object(se.a)({token:localStorage.getItem("token")||null},new MrkClientSession,{isFetching:!1}),Ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SIGN_IN_REQUEST":return Object(se.a)({},e,{isFetching:!0});case"SIGN_IN_SUCCESS":return Object(se.a)({},e,{isFetching:!1,token:t.payload.id},t.payload);case"SIGN_IN_FAILURE":return Object(se.a)({},e,{isFetching:!1});case"LOGOUT_SUCCESS":return Object(se.a)({},e,{token:null});default:return e}},Je={mrkDocuments:[],count:0,page:1,searchText:"",mrkDocumentType:MrkDocumentType.INPUT,isSearch:!1,isFetching:!1},Be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_MRK_DOCUMENT_REQUEST":return Object(se.a)({},e,{isFetching:!0});case"GET_MRK_DOCUMENT_SUCCESS":return Object(se.a)({},e,{mrkDocuments:t.payload.documentData,count:t.payload.count,page:t.payload.page,isSearch:t.payload.isSearch,isFetching:!1});case"GET_MRK_DOCUMENT_FAILURE":return Object(se.a)({},e,{mrkDocuments:[],count:0,page:1,isFetching:!1});case"CHANGE_SEARCH_TEXT":return Object(se.a)({},e,{searchText:t.payload});case"CHANGE_MRK_DOCUMENT_TYPE":return Object(se.a)({},e,{mrkDocumentType:t.payload});default:return e}},Xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type,e},$e=function(e){return new Promise((function(t,n){var a,r,c,o,l,i,s,u,m,p;return k.a.async((function(d){for(;;)switch(d.prev=d.next){case 0:return a=e(),r=Object(se.a)({},a.auth),d.prev=2,d.next=5,k.a.awrap(fetch("".concat(N,"/web-config.json")));case 5:return c=d.sent,d.next=8,k.a.awrap(c.json());case 8:return o=d.sent,d.next=11,k.a.awrap(Ne(o));case 11:if(null===r.token){d.next=24;break}return d.prev=12,d.next=15,k.a.awrap(Ie.refreshMrkClientSession(r.token));case 15:(l=d.sent)&&(r=Object(se.a)({},l,{token:l.id})),d.next=24;break;case 19:d.prev=19,d.t0=d.catch(12),I(d.t0),r=Object(se.a)({},r,{token:null}),localStorage.removeItem("token");case 24:return i=localStorage.getItem("lang")||o.LANG,d.next=27,k.a.awrap(fetch("".concat(N,"/translates/").concat(i,".json")));case 27:return s=d.sent,d.t1=O.a,d.t2={},d.t3=i,d.next=33,k.a.awrap(s.json());case 33:return d.t4=d.sent,u=(0,d.t1)(d.t2,d.t3,d.t4),M.a.locale(i),d.next=38,k.a.awrap(Ie.getAllLanguages());case 38:return m=d.sent,d.next=41,k.a.awrap(Ie.getInfo());case 41:p=d.sent,t(Object(se.a)({},a,{auth:r,settings:Object(se.a)({},p,{},o),i18n:{locale:i,translations:u,list:Object(T.reduce)(m,(function(e,t,n){return e.push({name:t,value:n}),e}),[])}})),d.next=49;break;case 45:d.prev=45,d.t5=d.catch(2),I(d.t5),n(d.t5);case 49:case"end":return d.stop()}}),null,null,[[2,45],[12,19]])}))},Ze=n(332),et=n(45),tt=Object(et.a)(),nt=function(){var e,t=[We.a.withExtraArgument(a),Object(qe.a)(tt),Ve.middleware($e)],n=[Object(Ze.composeWithDevTools)(w.applyMiddleware.apply(void 0,t))];return Object(w.createStore)((e=tt,Ve.outerReducer(Object(w.combineReducers)({router:Object(He.b)(e),asyncInitialState:Ve.innerReducer,i18n:A.i18nReducer,modals:ee.reducer,auth:Ye,mrkDocuments:Be,settings:Xe}))),w.compose.apply(void 0,n))}();Object(A.syncTranslationWithStore)(nt);var at,rt=nt,ct=n(633),ot=Object(s.connect)(null,(function(e){return Object(w.bindActionCreators)({hideModal:ee.actions.hideModal},e)}))((function(e){var t=e.hideModal,n=e.mrkDocument;return o.a.createElement(ct.a,{visible:!0,title:n.name,onCancel:function(){return t("MODAL_MRK_DOCUMENT")},onOk:function(){}})})),lt=function(){var e=Object(K.d)().values;return o.a.createElement("div",{style:{padding:"12px 24px"}},o.a.createElement(p.a,null,o.a.createElement(D.a.Text,{strong:!0},Object(T.get)(e,"document.name","s1"))),o.a.createElement(p.a,{style:{marginTop:12}},o.a.createElement(L.a,{layout:"horizontal"},o.a.createElement(L.a.Item,{labelAlign:"left",labelCol:{span:8},wrapperCol:{span:16},name:"document.name",label:A.I18n.t("MrkDocument.name")},o.a.createElement(G.a.TextArea,{name:"document.name",rows:3})),o.a.createElement(L.a.Item,{labelAlign:"left",labelCol:{span:8},wrapperCol:{span:16},name:"document.name",label:A.I18n.t("MrkDocument.name")},o.a.createElement(G.a,{name:"document.name"})))))},it=Object(s.connect)((function(e){return{token:e.auth.token}}),(function(e){return Object(w.bindActionCreators)({hideModal:ee.actions.hideModal},e)}))((function(e){var t=e.token,n=e.hideModal,a=Object(c.useState)(2),r=Object(he.a)(a,2),l=r[0],i=r[1],s=Object(c.useState)(null),u=Object(he.a)(s,2),m=u[0],p=u[1],d=Object(c.useState)(!1),f=Object(he.a)(d,2),E=f[0],g=f[1],h=Object(c.useState)({}),b=Object(he.a)(h,2),y=b[0],v=b[1];return Object(c.useEffect)((function(){if(null!==m){var e=!1;return function(){var n;k.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e||g(!0),a.prev=1,a.next=4,k.a.awrap(Ie.prepareDocumentByPattern(t,m.id));case 4:n=a.sent,e||v(n),I(n),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(1),I(a.t0);case 12:e||g(!1);case 13:case"end":return a.stop()}}),null,null,[[1,9]])}(),function(){e=!0}}}),[m]),o.a.createElement(K.b,{enableReinitialize:!0,initialValues:Object(se.a)({},y,{typeSave:1}),onSubmit:function(e,t){return k.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:t.setSubmitting,I(e);case 2:case"end":return n.stop()}}))}},(function(e){var t=e.handleSubmit,a=e.isSubmitting,r=e.values,c=e.setValues;e.initialValues;return o.a.createElement(ct.a,{visible:!0,width:720,centered:!0,bodyStyle:{height:"calc(100vh - 180px)",padding:0,overflowY:"hidden"},title:A.I18n.t("CreateMrkDocument.title"),onCancel:function(){return n("MODAL_CREATE_MRK_DOCUMENT")},footer:2===l?[o.a.createElement(z.a,{key:"id",type:"primary",loading:a,onClick:function(e){c(Object(se.a)({},r,{typeSave:1})),t(e)}},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0441 \u042d\u0426\u041f"),o.a.createElement(z.a,{key:"back",onClick:function(e){c(Object(se.a)({},r,{typeSave:2})),t(e)}},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"),o.a.createElement(z.a,{key:"submit",loading:a,onClick:function(e){c(Object(se.a)({},r,{typeSave:3})),t(e)}},"\u0412 \u0447\u0435\u0440\u043d\u043e\u0432\u0438\u043a\u0438")]:[o.a.createElement(z.a,{key:"submit",loading:E,disabled:Object(T.isEmpty)(y),onClick:function(){return i(2)}},"\u0414\u0430\u043b\u044c\u0448\u0435")]},1===l&&o.a.createElement(Pe,{documentPattern:m,setDocumentPattern:p}),2===l&&o.a.createElement(lt,null))}))})),st=Object(s.connect)((function(e){return{token:e.auth.token}}),(function(e){return Object(w.bindActionCreators)({hideModal:ee.actions.hideModal},e)}))((function(e){var t=e.hideModal,n=e.token;return o.a.createElement(K.b,{initialValues:{oldPassword:"",password:"",confirmation:""},validationSchema:W.object({oldPassword:W.string().required(A.I18n.t("form.required")),password:W.string().required(A.I18n.t("form.required")),confirmation:W.string().required(A.I18n.t("form.required")).oneOf([W.ref("password"),null],A.I18n.t("ChangePassword.password_not_match"))}),onSubmit:function(e,a){var r;return k.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return(r=a.setSubmitting)(!0),c.prev=2,c.next=5,k.a.awrap(Ie.changePassword(n,Object(se.a)({},e)));case 5:t("MODAL_CHANGE_PASSWORD"),c.next=12;break;case 8:c.prev=8,c.t0=c.catch(2),x.a.error({key:"changePassword",message:c.t0.preconditionExceptionKey,description:c.t0.message}),I(c.t0);case 12:r(!1);case 13:case"end":return c.stop()}}),null,null,[[2,8]])}},(function(e){var n=e.handleSubmit,a=e.isSubmitting;return o.a.createElement(ct.a,{visible:!0,centered:!0,maskClosable:!1,title:A.I18n.t("ChangePassword.title"),onCancel:function(){return t("MODAL_CHANGE_PASSWORD")},onOk:n,okButtonProps:{loading:a},okText:A.I18n.t("common.save"),cancelText:A.I18n.t("common.cancel")},o.a.createElement(L.a,{layout:"horizontal"},o.a.createElement(L.a.Item,{labelAlign:"left",labelCol:{span:8},wrapperCol:{span:16},name:"oldPassword",label:A.I18n.t("ChangePassword.oldPassword")},o.a.createElement(G.a.Password,{name:"oldPassword"})),o.a.createElement(L.a.Item,{labelAlign:"left",labelCol:{span:8},wrapperCol:{span:16},name:"password",label:A.I18n.t("ChangePassword.password")},o.a.createElement(G.a.Password,{name:"password"})),o.a.createElement(L.a.Item,{labelAlign:"left",labelCol:{span:8},wrapperCol:{span:16},name:"confirmation",label:A.I18n.t("ChangePassword.confirmation")},o.a.createElement(G.a.Password,{name:"confirmation"}))))}))})),ut=ot,mt=it,pt=st,dt=Object(ee.ModalRoot)(rt);at=ze,i.a.render(o.a.createElement(s.Provider,{store:rt},o.a.createElement(He.a,{history:tt},o.a.createElement($.a,{basename:N},o.a.createElement(at,null)),o.a.createElement(dt,{modalComponents:r}))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[339,1,2]]]);
//# sourceMappingURL=main.7cea1cc7.chunk.js.map